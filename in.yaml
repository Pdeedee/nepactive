project_name: "HMX"
yaml_synchro: true

ini_engine: "ase"
ini_ase_ensemble_files: ["prep/npt.py", "prep/npt_stable.py","prep/msst.py"]
python_interpreter: "/workplace/liuzf/miniforge3/envs/mattersim/bin/python"
ini_frames: 1500
ini_train_steps: 20000
training_ratio: 0.8
pot_number: 4
pot_inherit: true
train_steps: 7000
pot_file: "/home/liuzf/.local/mattersim/pretrained_models/mattersim-v1.0.0-1M.pth"

#一定要检查POTCAR的顺序正不正确
structure_prefix: "/workplace/liuzf/code/nepactive/example/00.HMX/prep"
structure_files: ["HMX_opt.cif","N2_H2_CO2.pdb","N2_H2_NH3_CO2.pdb"]
kpoints_file: "prep/KPOINTS"
incar_file: "prep/INCAR"
potcar_file: "prep/POTCAR"

#model_devi
uncertainty_threshold: [0.2,0.5]
uncertainty_level: 1
uncertainty_mode: "max"
energy_threshold: 1
needed_frames: 10000

max_candidate: 2000
model_devi_time_step: 0.2
gpu_available: [0,1,2,3]
task_per_gpu: 1
time_step: 0.2
model_devi_general:
  -
    id: "0-10"
    ensembles: ["msst"]
    structure_id: [[0]]
    # replicate_cell: "2 1 2"
    each_run_steps: [60000, 100000, 200000, 200000, 400000, 400000, 400000,600000,800000]
    v_shock: [7,8,9,10]
    uncertainty_threshold: [0.15,1]
    shock_direction: "y"
  -
    id: "11-24"
    ensembles: ["nphugo"]
    structure_id: [[0,1,2]]
    pressure: [30,40,50,60]
    # replicate_cell: "2 1 2"
    each_run_steps: [40000,70000,80000,100000,200000,400000,800000]
    v0: [2076]
    e0: [-1360.4]
    p0: [1]
    v_shock: [9]
    shock_direction: "y"
#目前只有相对误差


#ssh_machine
fp_command: "mpirun -np 96 vasp_std"
ssh_username: "sch9797@BSCC-T6"
ssh_hostname: "ssh.cn-zhongwei-1.paracloud.com"
ssh_port: 22


ssh_timeout: 20
remote_root: "/public1/home/sch9797/liu/nep"
group_numbers: 10
slurm_header_script:
  - "#!/bin/bash"
  - "#SBATCH --job-name=gpumd"
  - "#SBATCH -p v6_384"
  - "#SBATCH -N 1"
  - "#SBATCH -n 96"
  - "source /public1/soft/modules/module.sh"
  - "module load mpi/oneAPI/2022.1"
  - "export PATH=/public1/home/sch9797/software-sch9797/6.3.0-vtst+opt+sol+wannier:$PATH"

stable:
  structure: "HMX_opt.cif"
  struc_num: 4
  pressures: [20,25,30,35,40,45,50]
  task_per_gpu: 4
  gpu_available: [0,1,2,3]
  python_interpreter: "/workplace/liuzf/miniforge3/envs/dev/bin/python"
  steps: 400000